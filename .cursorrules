# –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è Denta CRM

## üéØ –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

–≠—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—è–º–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∫–ª–∏–Ω–∏–∫–∏ –Ω–∞ –±–∞–∑–µ Next.js 15, React 19, TypeScript, Supabase (PostgreSQL), Tailwind CSS.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
- Frontend: Next.js 15 (App Router), React 19, TypeScript, Tailwind CSS
- Backend: Next.js API Routes, Server Actions
- Database: Supabase (PostgreSQL)
- Authentication: Google OAuth 2.0, Email/Password
- Deployment: Vercel
- Icons: Lucide React

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP) - –ö–†–ò–¢–ò–ß–ù–û
- ‚úÖ **Repository —Å–ª–æ–π** (`lib/supabase-db.ts`) - –¢–û–õ–¨–ö–û —Ä–∞–±–æ—Ç–∞ —Å –ë–î, –±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚úÖ **Service —Å–ª–æ–π** (—Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏) - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ **Component —Å–ª–æ–π** (`app/**/*.tsx`) - –¢–û–õ–¨–ö–û UI, –±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚ùå **–ù–ï —Å–º–µ—à–∏–≤–∞—Ç—å —Å–ª–æ–∏!** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ù–ï –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```
lib/supabase-db.ts (Repository) ‚Üí –¢–û–õ–¨–ö–û –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
lib/patient-service.ts (Service) ‚Üí –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
app/patients/page.tsx (Component) ‚Üí –¢–û–õ–¨–ö–û UI
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
app/                    # Next.js App Router
‚îú‚îÄ‚îÄ api/               # API –º–∞—Ä—à—Ä—É—Ç—ã (–¢–û–õ–¨–ö–û App Router, –ù–ï Pages Router)
‚îÇ   ‚îú‚îÄ‚îÄ auth/         # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ admin/        # –ê–¥–º–∏–Ω—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ patients/     # API –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ contexts/          # React Context (AuthContext)
‚îú‚îÄ‚îÄ patients/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ [id]/         # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ actions.ts    # Server Actions
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞
‚îî‚îÄ‚îÄ layout.tsx        # –ö–æ—Ä–Ω–µ–≤–æ–π layout

lib/                   # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ constants.ts      # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–≤—Ä–∞—á–∏, –º–µ–¥—Å–µ—Å—Ç—Ä—ã, —Å—Ç–∞—Ç—É—Å—ã)
‚îú‚îÄ‚îÄ supabase.ts       # –ö–ª–∏–µ–Ω—Ç Supabase
‚îú‚îÄ‚îÄ supabase-db.ts    # Repository - —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îú‚îÄ‚îÄ auth-check.ts     # –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ admin-db.ts       # –§—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∞–¥–º–∏–Ω—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îú‚îÄ‚îÄ utils.ts          # –£—Ç–∏–ª–∏—Ç—ã (formatTime, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.)
‚îî‚îÄ‚îÄ logger.ts         # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## üìù –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

### TypeScript
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é
- ‚úÖ –ò–∑–±–µ–≥–∞–π—Ç–µ `as` –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–π —Ç–∏–ø–æ–≤ –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- ‚úÖ Optional –ø–æ–ª—è (`?`) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏–∑ `lib/supabase-db.ts` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `PatientData`)

### DRY (Don't Repeat Yourself) - –ö–†–ò–¢–ò–ß–ù–û
- ‚úÖ **–í–°–ï —É—Ç–∏–ª–∏—Ç—ã** (formatPhone, getPhoneDigits, –≤–∞–ª–∏–¥–∞—Ü–∏—è email, formatTime) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `lib/utils.ts`
- ‚úÖ **–ù–ï –¥—É–±–ª–∏—Ä—É–π—Ç–µ –∫–æ–¥!** –ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 2+ –º–µ—Å—Ç–∞—Ö - –≤—ã–Ω–µ—Å–∏—Ç–µ –≤ utils
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkAdminAuth()` –∏–∑ `lib/auth-check.ts`
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkAuthAppRouter()` –∏–∑ `lib/auth-check.ts`
- ‚úÖ –ï–¥–∏–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è email - —Å–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤ utils –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—ë –≤–µ–∑–¥–µ

**–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ù–ï –ø–æ–≤—Ç–æ—Ä—è—Ç—å):**
- ‚ùå `formatPhone()` –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ utils
- ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è email –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ utils
- ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkAdminAuth()`

### –†–æ—É—Ç–µ—Ä—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–¢–û–õ–¨–ö–û App Router** (`app/api/*`)
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pages Router** (`pages/api/*`) –¥–ª—è –Ω–æ–≤—ã—Ö API
- ‚úÖ –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤: `NextResponse.json({ error: '...' }, { status: 401 })`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `unauthorizedResponse()` –∏–∑ `lib/auth-check.ts` –¥–ª—è 401 –æ—Ç–≤–µ—Ç–æ–≤

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –≤ try-catch –±–ª–æ–∫–∞—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫: `{ error: '–æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏' }`
- ‚úÖ –õ–æ–≥–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `logger` –∏–∑ `lib/logger.ts`
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –í—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ `checkAuthAppRouter()`
- ‚úÖ –î–ª—è –∞–¥–º–∏–Ω—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkAdminAuth()` –∏–∑ `lib/auth-check.ts`
- ‚úÖ –ù–ï —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∞ (–Ω–µ `username === 'admin'`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ–≥–¥–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É–π—Ç–µ email: `email.toLowerCase().trim()`

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ **–í–°–ï** –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ API —É—Ä–æ–≤–Ω–µ
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–Ω–µ API –∏ –ë–î
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –í–°–ï —Å–µ–∫—Ä–µ—Ç—ã –≤ `.env.local` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Vercel
- ‚ùå –ù–ï —Ö—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `process.env.VARIABLE_NAME` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

### Rate Limiting
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ rate limiting –¥–ª—è API –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `rateLimiter` –∏–∑ `lib/rate-limit.ts`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ IP —á–µ—Ä–µ–∑ `getClientIp(req)` –∏–∑ `next/headers`

## üóÑÔ∏è –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### Supabase
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç –∏–∑ `lib/supabase.ts`
- ‚úÖ –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `lib/supabase-db.ts` (Repository —Å–ª–æ–π)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –í—Å–µ–≥–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ `created_by_email` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª—è–π—Ç–µ `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `safeEnsureAnonymousSession()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–Ω–æ–Ω–∏–º–Ω–æ–π —Å–µ—Å—Å–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã patients
```typescript
interface PatientData {
  id?: string;                          // UUID
  –§–ò–û: string;                          // NOT NULL, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
  –¢–µ–ª–µ—Ñ–æ–Ω?: string;
  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏?: string;
  '–î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏'?: string;
  '–í—Ä–µ–º—è –∑–∞–ø–∏—Å–∏'?: string;
  –°—Ç–∞—Ç—É—Å?: string;                      // –ò–∑ PATIENT_STATUSES
  –î–æ–∫—Ç–æ—Ä?: string;                      // –ò–∑ DOCTORS
  –ó—É–±—ã?: string;
  –ú–µ–¥—Å–µ—Å—Ç—Ä–∞?: string;                   // –ò–∑ NURSES
  '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞'?: string;
  created_by_email?: string;            // Email —Å–æ–∑–¥–∞—Ç–µ–ª—è
  created_at?: string;                  // TIMESTAMP
  updated_at?: string;                  // TIMESTAMP
}
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–∞—á–∞–º
- ‚úÖ –ê–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å–≤–æ–∏—Ö –≤—Ä–∞—á–µ–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `getDoctorsForEmailByEmail()` –∏–∑ `lib/admin-db.ts` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Ä–∞—á–µ–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ Repository —Å–ª–æ–µ, –Ω–æ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∞–≤ - –≤ Service

## üì¶ –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `lib/constants.ts`
- ‚úÖ `DOCTORS` - —Å–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫)
- ‚úÖ `NURSES` - —Å–ø–∏—Å–æ–∫ –º–µ–¥—Å–µ—Å—Ç–µ—Ä (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫)
- ‚úÖ `PATIENT_STATUSES` - —Å—Ç–∞—Ç—É—Å—ã –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫)
- ‚ùå **–ù–ï —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç–µ** —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ!

**–ü—Ä–∏–º–µ—Ä:**
```typescript
import { DOCTORS, PATIENT_STATUSES, NURSES } from '@/lib/constants';

const doctorOptions = DOCTORS.map(doctor => ({ value: doctor, label: doctor }));
```

## üé® UI/UX —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–µ–π
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Lucide React –¥–ª—è –∏–∫–æ–Ω–æ–∫
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω (mobile-first –ø–æ–¥—Ö–æ–¥)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Server Components –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, Client Components —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –§–æ—Ä–º—ã
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ Loading states –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Server Actions –¥–ª—è –º—É—Ç–∞—Ü–∏–π (—Ñ–∞–π–ª—ã `actions.ts`)

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `formatTime()` –∏–∑ `lib/utils.ts` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä—É–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω —á–µ—Ä–µ–∑ —É—Ç–∏–ª–∏—Ç—ã (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ utils)

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Server Actions –¥–ª—è –º—É—Ç–∞—Ü–∏–π (–≤–º–µ—Å—Ç–æ API routes –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `revalidatePath()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–µ—à–∞ –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î (–º–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.select()` —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø–æ–ª—è–º–∏)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lazy loading –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Server Components –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üìã –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

### –ü–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ —É–∂–µ –ø–æ—Ö–æ–∂–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `lib/utils.ts` –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —É—Ç–∏–ª–∏—Ç–∞—Ö
2. ‚úÖ –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –≤ –∫–∞–∫–æ–π —Å–ª–æ–π –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ –∫–æ–¥ (Repository/Service/Component)
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `lib/constants.ts`
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑ `lib/auth-check.ts`

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ API –º–∞—Ä—à—Ä—É—Ç–∞:
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Router (`app/api/*/route.ts`)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ `checkAuthAppRouter()` –∏–ª–∏ `checkAdminAuth()`
3. ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
4. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –≤ try-catch
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: `NextResponse.json({ ... }, { status: ... })`
6. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ rate limiting –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
7. ‚úÖ –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤–∞–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `logger`

**–®–∞–±–ª–æ–Ω API –º–∞—Ä—à—Ä—É—Ç–∞:**
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { checkAuthAppRouter, unauthorizedResponse } from '@/lib/auth-check';
import { logger } from '@/lib/logger';

export async function POST(req: NextRequest) {
  try {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    const isAuthenticated = await checkAuthAppRouter();
    if (!isAuthenticated) {
      return unauthorizedResponse();
    }

    // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
    const body = await req.json();
    if (!body.requiredField) {
      return NextResponse.json(
        { error: 'requiredField is required' },
        { status: 400 }
      );
    }

    // 3. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    // ...

    // 4. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    return NextResponse.json({ success: true });
  } catch (error) {
    logger.error('Error in API route', { error });
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}
```

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
1. ‚úÖ –¢–æ–ª—å–∫–æ UI –ª–æ–≥–∏–∫–∞, –±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—Ç–∏–ª–∏—Ç—ã –∏–∑ `lib/utils.ts` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `lib/constants.ts`
4. ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ loading –∏ error —Å–æ—Å—Ç–æ—è–Ω–∏—è
5. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Server Components –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
6. ‚úÖ –î–æ–±–∞–≤–ª—è–π—Ç–µ `'use client'` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ö—É–∫–∏ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

### –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Server Action:
1. ‚úÖ –î–æ–±–∞–≤–ª—è–π—Ç–µ `'use server'` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
2. ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `lib/supabase-db.ts` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `revalidatePath()` –ø–æ—Å–ª–µ –º—É—Ç–∞—Ü–∏–π
5. ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏

## ‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

- ‚ùå –ù–ï –¥—É–±–ª–∏—Ä—É–π—Ç–µ –∫–æ–¥ (formatPhone, –≤–∞–ª–∏–¥–∞—Ü–∏—è email –∏ —Ç.–¥.) - –≤—ã–Ω–æ—Å–∏—Ç–µ –≤ utils
- ‚ùå –ù–ï —Å–º–µ—à–∏–≤–∞–π—Ç–µ —Å–ª–æ–∏ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –∏–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö)
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Pages Router –¥–ª—è –Ω–æ–≤—ã—Ö API - —Ç–æ–ª—å–∫–æ App Router
- ‚ùå –ù–ï —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è (–≤—Ä–∞—á–∏, –º–µ–¥—Å–µ—Å—Ç—Ä—ã, —Å—Ç–∞—Ç—É—Å—ã) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `as` –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ùå –ù–ï —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ
- ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkAdminAuth()`
- ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `checkAuthAppRouter()`
- ‚ùå –ù–ï –∑–∞–±—ã–≤–∞–π—Ç–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å email: `email.toLowerCase().trim()`
- ‚ùå –ù–ï –∑–∞–±—ã–≤–∞–π—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `created_by_email` –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å `updated_at`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

–ü–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º –∫–æ–¥–∞ –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å:
- `ARCHITECTURE_ANALYSIS.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–æ–±–ª–µ–º—ã
- `README.md` - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
- `SECURITY_ANALYSIS.md` - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `CODING_STANDARDS.md` - –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ:
1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤** (Repository ‚Üí Service ‚Üí Component)
2. **–í—ã–Ω–æ—Å –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞** –≤ utils
3. **–£–ª—É—á—à–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏** (–∏–∑–±–µ–≥–∞—Ç—å `as`, –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é)
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**
5. **–ú–∏–≥—Ä–∞—Ü–∏—è —Å Pages Router –Ω–∞ App Router** (–µ—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫–æ–¥, —É–±–µ–¥–∏—Ç–µ—Å—å:
- ‚úÖ –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤)
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `lib/constants.ts`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `lib/auth-check.ts` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ API
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
