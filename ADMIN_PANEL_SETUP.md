# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- SQL —Å–∫—Ä–∏–ø—Ç: `supabase-setup-admin.sql`
- –¢–∞–±–ª–∏—Ü—ã: `doctors`, `nurses`, `whitelist_emails`, `admins`

### 2. API Endpoints
- `/api/admin/login` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∞
- `/api/admin/doctors` - CRUD –¥–ª—è –≤—Ä–∞—á–µ–π
- `/api/admin/nurses` - CRUD –¥–ª—è –º–µ–¥—Å–µ—Å—Ç–µ—Ä
- `/api/admin/whitelist` - CRUD –¥–ª—è –±–µ–ª—ã—Ö —Å–ø–∏—Å–∫–æ–≤
- `/api/doctors` - –ø—É–±–ª–∏—á–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–∞—á–µ–π
- `/api/nurses` - –ø—É–±–ª–∏—á–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ–¥—Å–µ—Å—Ç–µ—Ä
- `/api/whitelist` - –ø—É–±–ª–∏—á–Ω—ã–π endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–µ–ª—ã—Ö —Å–ø–∏—Å–∫–æ–≤

### 3. –ê–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `/admin` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
- `/admin/dashboard` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞—é—Ç –≤—Ä–∞—á–µ–π –∏ –º–µ–¥—Å–µ—Å—Ç–µ—Ä –∏–∑ –ë–î
- –ë–µ–ª—ã–µ —Å–ø–∏—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î
- –•—É–∫ `useConstants` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üöÄ –®–∞–≥–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **SQL Editor**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase-setup-admin.sql`
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (Run)

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:

```bash
ADMIN_PASSWORD=app_password
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
npm run dev
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/admin`
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: `app_password`
3. –í—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –Ω–∞ `/admin/dashboard`

### –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞—á–∞:
1. –í–≤–µ–¥–∏—Ç–µ –§–ò–û –≤—Ä–∞—á–∞ –≤ —Ñ–æ—Ä–º—É
2. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Ä–∞—á –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥—Å–µ—Å—Ç—Ä—ã:
1. –í–≤–µ–¥–∏—Ç–µ –§–ò–û –º–µ–¥—Å–µ—Å—Ç—Ä—ã –≤ —Ñ–æ—Ä–º—É
2. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–µ–¥—Å–µ—Å—Ç—Ä–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ email –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫:
1. –í–≤–µ–¥–∏—Ç–µ email (–Ω–∞–ø—Ä–∏–º–µ—Ä, `test@gmail.com`)
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä (Google, Yandex, Email)
3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ email –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ

#### –£–¥–∞–ª–µ–Ω–∏–µ:
1. –ù–∞–∂–º–∏—Ç–µ "–£–¥–∞–ª–∏—Ç—å" —Ä—è–¥–æ–º —Å –ª—é–±—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:3000/patients`
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–∞—Ö –≤—Ä–∞—á–µ–π –∏ –º–µ–¥—Å–µ—Å—Ç–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
4. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤–æ–≥–æ –≤—Ä–∞—á–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
5. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/patients` - –Ω–æ–≤—ã–π –≤—Ä–∞—á –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints:

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π (–ø—É–±–ª–∏—á–Ω—ã–π)
curl http://localhost:3000/api/doctors

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π (—Ç—Ä–µ–±—É–µ—Ç –∞–¥–º–∏–Ω-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é)
curl http://localhost:3000/api/admin/doctors

# –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω
curl -X POST http://localhost:3000/api/admin/login \
  -H "Content-Type: application/json" \
  -d '{"password":"app_password"}'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

–í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–∞—á–µ–π
SELECT * FROM doctors;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ–¥—Å–µ—Å—Ç–µ—Ä
SELECT * FROM nurses;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–µ–ª—ã–µ —Å–ø–∏—Å–∫–∏
SELECT * FROM whitelist_emails;
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `app_password`. –ò–∑–º–µ–Ω–∏—Ç–µ –≤ `.env.local` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è bcrypt
3. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏**: –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç RLS, –Ω–æ –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∞–∑—Ä–µ—à–∞—é—Ç —á—Ç–µ–Ω–∏–µ –≤—Å–µ–º. –î–ª—è –∞–¥–º–∏–Ω–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è –≤ API
4. **Fallback**: –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `lib/constants.ts`

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Unauthorized" –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∞–¥–º–∏–Ω API
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤–æ—à–ª–∏ —á–µ—Ä–µ–∑ `/admin` –∏ cookie —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ SQL —Å–∫—Ä–∏–ø—Ç–∞
**–†–µ—à–µ–Ω–∏–µ**: 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã (–∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ –∏—Ö —Å–Ω–∞—á–∞–ª–∞)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ Supabase

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] SQL —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ Supabase
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `ADMIN_PASSWORD` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ `.env.local`
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (`npm run dev`)
- [ ] –ú–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É (`/admin`)
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä–∞—á–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ–¥—Å–µ—Å—Ç—Ä—É —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- [ ] –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å email –≤ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫
- [ ] –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- [ ] –í –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
- [ ] –ù–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üéâ
