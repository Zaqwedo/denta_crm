# Denta CRM - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Denta CRM** - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-—Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å—è–º–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–ª–∏–Ω–∏–∫. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –±–∞–∑–µ Next.js 16 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeScript, TailwindCSS –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏ Supabase –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏**: –ü–æ–ª–Ω—ã–π CRUD (—Å–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ) –∑–∞–ø–∏—Å–µ–π
- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å**: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–∞—Ö (–¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü)
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Email-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –¥–µ–º–æ-—Ä–µ–∂–∏–º–æ–º
- ‚úÖ **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI**: –î–∏–∑–∞–π–Ω –≤ —Å—Ç–∏–ª–µ iOS —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ—Ä–µ–∑ EmailJS –∏–ª–∏ Gmail SMTP
- ‚úÖ **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã**: –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|--------|------------|
| **Frontend** | Next.js | 16.1.1 | React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å SSR/SSG |
| **–Ø–∑—ã–∫** | TypeScript | 5.9.3 | –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript |
| **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è** | TailwindCSS | 4.1.18 | Utility-first CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | Supabase | 2.90.1 | PostgreSQL —Å REST API |
| **Email** | EmailJS | 3.2.0 | –°–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ email |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è | - | Cookie-based —Å localStorage |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
denta-crm/
‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ calendar/                 # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ components/               # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtectedRoute.tsx    # –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                 # React Context API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx       # –ö–æ–Ω—Ç–µ–∫—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ login/                    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ patients/                 # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ actions.ts            # Server Actions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarView.tsx      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DailyPreviewModal.tsx # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–Ω—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DayView.tsx           # –í–∏–¥ –ø–æ –¥–Ω—è–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GlobalToast.tsx       # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MonthView.tsx         # –í–∏–¥ –ø–æ –º–µ—Å—è—Ü–∞–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NewPatientForm.tsx    # –§–æ—Ä–º–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PatientCard.tsx       # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PatientDetailsModal.tsx # –î–µ—Ç–∞–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PatientForm.tsx       # –§–æ—Ä–º–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SegmentedControl.tsx  # –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∏–¥–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TabBar.tsx            # –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ globals.css               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # –ö–æ—Ä–Ω–µ–≤–æ–π layout
‚îÇ   ‚îú‚îÄ‚îÄ new/                      # –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å (–ø—É—Å—Ç–∞—è)
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –î–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ lib/                          # –£—Ç–∏–ª–∏—Ç—ã –∏ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ email.ts                  # Email —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ supabase-db.ts            # –†–∞–±–æ—Ç–∞ —Å Supabase
‚îÇ   ‚îî‚îÄ‚îÄ supabase.ts               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Supabase
‚îú‚îÄ‚îÄ middleware.ts                 # Next.js middleware
‚îú‚îÄ‚îÄ pages/api/                    # API –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.ts              # API –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logout.ts             # API –≤—ã—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ send-email.ts             # API –æ—Ç–ø—Ä–∞–≤–∫–∏ email
‚îî‚îÄ‚îÄ package.json                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## üîê –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –¢–∏–ø—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### 1. –ü–∞—Ä–æ–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/login`)
- **–§–∞–π–ª**: `app/login/page.tsx`
- **API**: `pages/api/auth/login.ts`
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: HttpOnly cookies + localStorage
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**: 30 –¥–Ω–µ–π (cookies) / 7 –¥–Ω–µ–π (localStorage)

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å
2. –û—Ç–ø—Ä–∞–≤–∫–∞ POST –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ `/api/auth/login`
3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å `ADMIN_PASSWORD` –∏–ª–∏ `test` –≤ dev)
4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ HttpOnly cookie `denta_auth=valid`
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ localStorage
6. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `/patients`

#### 2. Email –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–¥–µ–º–æ-—Ä–µ–∂–∏–º)
- **–°–µ—Ä–≤–∏—Å**: `lib/email.ts`
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞**: 6-–∑–Ω–∞—á–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–æ–¥
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**: 10 –º–∏–Ω—É—Ç
- **–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã**:
  - **EmailJS**: –†–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email
  - **Gmail SMTP**: –ß–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API
  - **–î–µ–º–æ**: –ü–æ–∫–∞–∑ –∫–æ–¥–∞ –≤ alert

### –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### Middleware (`middleware.ts`)
```typescript
// –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
const protectedPaths = ['/patients', '/calendar', '/new']

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
if (isProtectedPath && !authCookie) {
  redirect('/login')
}
```

#### ProtectedRoute –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (`app/components/ProtectedRoute.tsx`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Loading —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏

#### AuthContext (`app/contexts/AuthContext.tsx`)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Å—Å–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ whitelist –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

#### PatientData –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`lib/supabase-db.ts`)
```typescript
interface PatientData {
  id?: string;           // UUID –∑–∞–ø–∏—Å–∏
  –§–ò–û: string;           // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
  –¢–µ–ª–µ—Ñ–æ–Ω?: string;      // –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω
  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏?: string;  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  '–î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏'?: string; // –î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞
  '–í—Ä–µ–º—è –∑–∞–ø–∏—Å–∏'?: string; // –í—Ä–µ–º—è –ø—Ä–∏–µ–º–∞
  –°—Ç–∞—Ç—É—Å?: string;       // –°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏
  –î–æ–∫—Ç–æ—Ä?: string;       // –õ–µ—á–∞—â–∏–π –≤—Ä–∞—á
  –ó—É–±—ã?: string;         // –ó—É–±—ã –¥–ª—è –ª–µ—á–µ–Ω–∏—è
  –ú–µ–¥—Å–µ—Å—Ç—Ä–∞?: string;    // –ü–æ–º–æ–≥–∞—é—â–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª
  '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞'?: string; // –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
}
```

### CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ (`getPatients()`)
- **–§–∞–π–ª**: `lib/supabase-db.ts`
- **–ú–µ—Ç–æ–¥**: `supabase.from('patients').select('*')`
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**: `Promise<PatientData[]>`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: Server Component –≤ `app/patients/page.tsx`

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (`addPatient()`)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –§–ò–û
- **–ú–µ—Ç–æ–¥**: `supabase.from('patients').insert([data])`
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (`updatePatient()`)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `patientId` (UUID), `updatedData`
- **–ú–µ—Ç–æ–¥**: `supabase.from('patients').update(data).eq('id', patientId)`

#### –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (`deletePatient()`)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: `patientId` (UUID)
- **–ú–µ—Ç–æ–¥**: `supabase.from('patients').delete().eq('id', patientId)`

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

#### PatientCard (`app/patients/PatientCard.tsx`)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ü–∏–µ–Ω—Ç–µ
- –î–µ–π—Å—Ç–≤–∏—è: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏

#### PatientForm (`app/patients/PatientForm.tsx`)
- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–æ–≤

#### PatientDetailsModal (`app/patients/PatientDetailsModal.tsx`)
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞—Ü–∏–µ–Ω—Ç–µ
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–µ
- –ê–Ω–∏–º–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è

---

## üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è

#### CalendarView (`app/patients/CalendarView.tsx`)
- –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤

#### MonthView (`app/patients/MonthView.tsx`)
- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ –º–µ—Å—è—Ü–∞–º
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ—Å—è—Ü–∞–º
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö –¥–Ω–µ–π

#### DayView (`app/patients/DayView.tsx`)
- –î–µ—Ç–∞–ª—å–Ω—ã–π –≤–∏–¥ –ø–æ –¥–Ω—è–º
- –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å
- –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞

#### DailyPreviewModal (`app/patients/DailyPreviewModal.tsx`)
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞–ø–∏—Å—è–º–∏ –¥–Ω—è
- –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É

### –°–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å (`SegmentedControl.tsx`)
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∏–¥–∞–º–∏: –î–µ–Ω—å/–ù–µ–¥–µ–ª—è/–ú–µ—Å—è—Ü
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

---

## üìß Email —Å–∏—Å—Ç–µ–º–∞

### EmailService (`lib/email.ts`)

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
1. **EmailJS** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ EmailJS dashboard
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `EMAILJS_*`
   - HTML —à–∞–±–ª–æ–Ω—ã —Å —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π

2. **Gmail SMTP**
   - –ß–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API `/api/send-email`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç googleapis
   - Service Account –∫–ª—é—á

3. **–î–µ–º–æ —Ä–µ–∂–∏–º**
   - –ü–æ–∫–∞–∑ –∫–æ–¥–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–º alert
   - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```typescript
const emailService = EmailService.getInstance()
await emailService.sendVerificationCode(email, code)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ EmailJS

#### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env.local`)
```env
NEXT_PUBLIC_EMAILJS_SERVICE_ID=your_service_id
NEXT_PUBLIC_EMAILJS_TEMPLATE_ID=your_template_id
NEXT_PUBLIC_EMAILJS_PUBLIC_KEY=your_public_key
```

#### –®–∞–±–ª–æ–Ω email
```
Subject: –ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è Denta CRM

–í–∞—à –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: {{code}}

–ö–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 10 –º–∏–Ω—É—Ç.
```

---

## üé® –î–∏–∑–∞–π–Ω –∏ UX

### –°—Ç–∏–ª–µ–≤–æ–π –ø–æ–¥—Ö–æ–¥

#### iOS-inspired –¥–∏–∑–∞–π–Ω
- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã (`rounded-2xl`, `rounded-[20px]`)
- –ë–ª—é—Ä–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ —Ç–µ–Ω–∏
- –°–≤–µ—Ç–ª–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ (`#f2f2f7`)
- Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `max-w-md`
- –û—Ç—Å—Ç—É–ø—ã: `px-4`, `py-8`
- Safe area –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- Responsive breakpoints

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

#### TabBar (`app/patients/TabBar.tsx`)
- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å
- –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏: –ü–∞—Ü–∏–µ–Ω—Ç—ã/–ö–∞–ª–µ–Ω–¥–∞—Ä—å/+
- –ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º

#### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (`GlobalToast.tsx`)
- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã: —É—Å–ø–µ—Ö, –æ—à–∏–±–∫–∞, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_key

# –ê–¥–º–∏–Ω –ø–∞—Ä–æ–ª—å
ADMIN_PASSWORD=your_secure_password
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (–¥–ª—è email)
```env
# EmailJS
NEXT_PUBLIC_EMAILJS_SERVICE_ID=service_id
NEXT_PUBLIC_EMAILJS_TEMPLATE_ID=template_id
NEXT_PUBLIC_EMAILJS_PUBLIC_KEY=public_key

# Gmail SMTP
GOOGLE_CLIENT_EMAIL=service_account_email
GOOGLE_PRIVATE_KEY=private_key
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
npm install
npm run dev
```

#### –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```bash
npm run build
npm run start
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `patients`
```sql
CREATE TABLE patients (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  –§–ò–û TEXT NOT NULL,
  –¢–µ–ª–µ—Ñ–æ–Ω TEXT,
  –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ TEXT,
  "–î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏" DATE,
  "–í—Ä–µ–º—è –∑–∞–ø–∏—Å–∏" TIME,
  –°—Ç–∞—Ç—É—Å TEXT,
  –î–æ–∫—Ç–æ—Ä TEXT,
  –ó—É–±—ã TEXT,
  –ú–µ–¥—Å–µ—Å—Ç—Ä–∞ TEXT,
  "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞" DATE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### RLS –ø–æ–ª–∏—Ç–∏–∫–∏
```sql
-- –†–∞–∑—Ä–µ—à–∏—Ç—å —á—Ç–µ–Ω–∏–µ –≤—Å–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
CREATE POLICY "Allow read access to authenticated users" ON patients
  FOR SELECT USING (auth.role() = 'authenticated');

-- –†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
CREATE POLICY "Allow write access to authenticated users" ON patients
  FOR ALL USING (auth.role() = 'authenticated');
```

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: EmailJS –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–∞
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ EmailJS dashboard
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–º–æ —Ä–µ–∂–∏–º –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ü—Ä–æ–±–ª–µ–º–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Supabase
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ADMIN_PASSWORD`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –û—á–∏—Å—Ç–∏—Ç—å localStorage

#### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞–ª–µ–Ω–¥–∞—Ä—å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ JavaScript

---

## üöÄ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Excel/PDF
- [ ] –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- [ ] –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ–º–æ —Ä–µ–∂–∏–º—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `README.md`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Email**: `EMAILJS_SETUP.md`, `GMAIL_SETUP.md`
- **API**: `EMAILJS_FIX.md`

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –≤–µ—Ä—Å–∏–∏ 1.0.0 Denta CRM*